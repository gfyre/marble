{"version":3,"sources":["webpack:///./src/views/PasswordConfirmation.vue?7e43","webpack:///./src/views/PasswordConfirmation.vue?1e5c","webpack:///src/views/PasswordConfirmation.vue","webpack:///./src/views/PasswordConfirmation.vue?59e1","webpack:///./src/views/PasswordConfirmation.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","passwordState","model","value","callback","$$v","password","expression","confirmPasswordState","confirmPassword","on","$event","resetPassword","usernameState","username","resetButtonClick","staticRenderFns","name","props","token","type","String","required","data","isReset","methods","validEmail","re","test","email","computed","length","component"],"mappings":"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","file":"js/chunk-f8be6766.767469b5.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PasswordConfirmation.vue?vue&type=style&index=0&id=2400f716&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"confirmation-page\"},[_c('div',{staticClass:\"page\"},[_c('div',[(_vm.isReset)?_c('div',[_c('h2',[_vm._v(\"Enter a new password\")]),_c('b-form-group',[_c('b-form-input',{attrs:{\"id\":\"password\",\"type\":\"password\",\"name\":\"password\",\"state\":_vm.passwordState,\"placeholder\":\"Enter a password\",\"aria-describedby\":\"passwordFeedback\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('b-form-invalid-feedback',{attrs:{\"id\":\"passwordFeedback\"}},[_vm._v(\"Enter at least 7 characters.\")])],1),_c('b-form-group',[_c('b-form-input',{attrs:{\"id\":\"confirmPassword\",\"type\":\"password\",\"name\":\"confirmPassword\",\"state\":_vm.confirmPasswordState,\"placeholder\":\"Re-enter the password\",\"aria-describedby\":\"confirmPasswordFeedback\"},model:{value:(_vm.confirmPassword),callback:function ($$v) {_vm.confirmPassword=$$v},expression:\"confirmPassword\"}}),_c('b-form-invalid-feedback',{attrs:{\"id\":\"confirmPasswordFeedback\"}},[_vm._v(\"It should match the password entered.\")])],1),_c('b-button',{staticClass:\"primary-button\",on:{\"click\":function($event){return _vm.resetPassword()}}},[_vm._v(\"Reset Password\")])],1):_c('div',[_c('h2',[_vm._v(\"Re-enter your email for reset link\")]),_c('b-form-group',[_c('b-form-input',{attrs:{\"id\":\"username\",\"type\":\"email\",\"name\":\"username\",\"state\":_vm.usernameState,\"placeholder\":\"Enter Email\",\"aria-describedby\":\"usernameFeedback\"},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_c('b-form-invalid-feedback',{attrs:{\"id\":\"usernameFeedback\"}},[_vm._v(\"\\n            Enter a valid email address\\n          \")])],1),_c('b-button',{staticClass:\"primary-button\",on:{\"click\":function($event){return _vm.resetButtonClick()}}},[_vm._v(\"Resend Email\")])],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"confirmation-page\">\n    <div class=\"page\">\n      <div>\n        <div v-if=\"isReset\">\n          <h2>Enter a new password</h2>\n          <b-form-group>\n            <b-form-input\n              id=\"password\"\n              type=\"password\"\n              name=\"password\"\n              :state=\"passwordState\"\n              v-model=\"password\"\n              placeholder=\"Enter a password\"\n              aria-describedby=\"passwordFeedback\"\n            ></b-form-input>\n            <b-form-invalid-feedback id=\"passwordFeedback\">Enter at least 7 characters.</b-form-invalid-feedback>\n          </b-form-group>\n\n          <b-form-group>\n            <b-form-input\n              id=\"confirmPassword\"\n              type=\"password\"\n              name=\"confirmPassword\"\n              :state=\"confirmPasswordState\"\n              v-model=\"confirmPassword\"\n              placeholder=\"Re-enter the password\"\n              aria-describedby=\"confirmPasswordFeedback\"\n            ></b-form-input>\n            <b-form-invalid-feedback\n              id=\"confirmPasswordFeedback\"\n            >It should match the password entered.</b-form-invalid-feedback>\n          </b-form-group>\n\n          <b-button @click=\"resetPassword()\" class=\"primary-button\">Reset Password</b-button>\n        </div>\n        <div v-else>\n          <h2>Re-enter your email for reset link</h2>\n          <b-form-group>\n            <b-form-input\n              id=\"username\"\n              type=\"email\"\n              name=\"username\"\n              :state=\"usernameState\"\n              v-model=\"username\"\n              placeholder=\"Enter Email\"\n              aria-describedby=\"usernameFeedback\"\n            ></b-form-input>\n            <b-form-invalid-feedback id=\"usernameFeedback\">\n              <!-- This will only be shown if the preceeding input has an invalid state -->\n              Enter a valid email address\n            </b-form-invalid-feedback>\n          </b-form-group>\n          <b-button @click=\"resetButtonClick()\" class=\"primary-button\">Resend Email</b-button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ProxyUrl from '@/constants/ProxyUrls';\n\nexport default {\n  name: 'PasswordConfirmation',\n  props: {\n    token: {\n      type: String,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      isReset: false,\n      password: '',\n      confirmPassword: '',\n      username: '',\n    };\n  },\n\n  async created() {\n    // When created, first confirm if the link is still valid.\n    try {\n      const { data } = await this.$axios({\n        method: 'get',\n        url: ProxyUrl.validateResetToken + this.token,\n      });\n\n      if (data && data.responseData) {\n        this.isReset = true;\n        this.$notify({\n          group: 'all',\n          type: 'success',\n          text: 'You can now change your password.',\n        });\n      } else {\n        this.$notify({\n          group: 'all',\n          type: 'warn',\n          text: 'Looks like you are a little late. Please try resending the email.',\n        });\n      }\n    } catch (err) {\n      // console.log(\"Error \", err);\n      this.$notify({\n        group: 'all',\n        type: 'error',\n        text:\n          'There was an error fulfilling your request. Please try resetting your password again.',\n      });\n    }\n  },\n\n  methods: {\n    validEmail(email) {\n      // eslint-disable-next-line\n      const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      return re.test(email);\n    },\n    async resetButtonClick() {\n      if (this.usernameState) {\n        try {\n          const { data } = await this.$axios({\n            method: 'get',\n            url: ProxyUrl.forgotPassword + this.username,\n          });\n          if (data && data.httpStatus) {\n            this.$notify({\n              group: 'all',\n              type: 'success',\n              text: 'The email was just sent. Please check your email and follow the instructions.',\n            });\n          }\n        } catch (err) {\n          this.$notify({\n            group: 'all',\n            type: 'error',\n            text: 'The email could not be sent right now. Please try again later',\n          });\n        }\n      }\n    },\n    async resetPassword() {\n      if (this.passwordState && this.confirmPasswordState) {\n        try {\n          const { data } = await this.$axios({\n            method: 'post',\n            url: ProxyUrl.resetPassword,\n            data: {\n              token: this.token,\n              newPassword: this.password,\n            },\n          });\n          if (data && data.httpStatus === 200 && data.responseData) {\n            this.$notify({\n              group: 'all',\n              type: 'success',\n              text: 'You can now go ahead and login.',\n            });\n            this.$router.push('/login');\n          } else {\n            this.isReset = false;\n            this.password = '';\n            this.confirmPassword = '';\n\n            this.$notify({\n              group: 'all',\n              type: 'warn',\n              text: 'Looks like you are a little late. Please try resending the email.',\n            });\n          }\n        } catch (err) {\n          this.$notify({\n            group: 'all',\n            type: 'error',\n            text:\n              'There was an error fulfilling your request. Please try resetting your password again.',\n          });\n        }\n      }\n    },\n  },\n\n  computed: {\n    passwordState() {\n      if (this.password.length === 0) return null;\n      return this.password.length > 6;\n    },\n\n    confirmPasswordState() {\n      if (this.confirmPassword.length === 0) return null;\n      return this.confirmPassword === this.password;\n    },\n\n    usernameState() {\n      if (this.username.length === 0) return null;\n      return this.validEmail(this.username);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n#passwordFeedback,\n#confirmPasswordFeedback,\n#usernameFeedback {\n  font-size: 12px;\n  text-align: left;\n}\n\nh2 {\n  margin-bottom: 50px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PasswordConfirmation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PasswordConfirmation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PasswordConfirmation.vue?vue&type=template&id=2400f716&scoped=true&\"\nimport script from \"./PasswordConfirmation.vue?vue&type=script&lang=js&\"\nexport * from \"./PasswordConfirmation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PasswordConfirmation.vue?vue&type=style&index=0&id=2400f716&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2400f716\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}